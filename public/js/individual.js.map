{"version":3,"sources":["individual.js"],"names":["buildLatest","stream","latestTemplate","Handlebars","compile","$","html","registerHelper","passedString","firstLast","split","last","toLowerCase","SafeString","a","b","opts","fn","this","length","remove","each","k","v","latest","append","formatStream","data","console","log","PERSON","text","names","reverse","_","includes","linkurl","linktext","ajax","dataType","url","success","cache"],"mappings":"AAAA,YAYA,SAASA,aAAYC,GACnB,GAAIC,GAAiBC,WAAWC,QAAQC,EAAE,cAAcC,OAExDH,YAAWI,eAAe,YAAa,SAAUC,GAC/C,GAAIC,GAAYD,EAAaE,MAAM,KAC/BC,EAAOF,EAAU,EAErB,OADAE,GAAOA,EAAKC,cACL,GAAIT,YAAWU,WAAWF,KAGnCR,WAAWI,eAAe,QAAS,SAAUO,EAAGC,EAAGC,GACjD,GAAIF,IAAMC,EACR,MAAOC,GAAKC,GAAGC,QAIG,IAAlBjB,EAAOkB,QACTd,EAAE,wBAAwBe,SAG5Bf,EAAEgB,KAAKpB,EAAQ,SAAUqB,EAAGC,GAC1B,GAAIC,GAAStB,EAAeqB,EAC5BlB,GAAE,WAAWoB,OAAOD,KAUxB,QAASE,cAAaC,GACpBC,QAAQC,IAAIF,EAEZ,IAAIG,GAASzB,EAAE,sBAAsB0B,OACjC9B,EAAS0B,CAIbtB,GAAEgB,KAAKM,EAAM,SAAUL,EAAGC,GACxB,GAAIS,GAAQT,EAAES,MAAMtB,MAAM,KAC1BT,GAAOqB,GAAGU,MAAQA,IAGpB/B,EAASA,EAAOgC,UAGZ5B,EAAE,WAAWc,OAAS,GACxBnB,YAAYC,GAKdI,EAAEgB,KAAKpB,EAAQ,SAAUqB,EAAGC,IACtBW,EAAEC,SAASZ,EAAES,MAAOF,IAAWI,EAAEC,SAASZ,EAAES,MAAO,SACrD3B,EAAE,mBAAmBoB,OAAO,eAAkBF,EAAEa,QAAU,KAAQb,EAAEc,SAAW,cAK7C,IAAlChC,EAAE,qBAAqBc,QACzBd,EAAE,mBAAmBe,SAIzBf,EAAEiC,MACAC,SAAU,OACVC,IAAK,yFACLC,QAASf,aACTgB,OAAO","file":"individual.js","sourcesContent":["'use strict';\n\n/*\nglobal $:true, window:true, _:true, Handlebars:true\n*/\n\n/*\n////////////////////////////////////////////////////////////////////////////////\n// BUILDING THE LATEST PAGE\n////////////////////////////////////////////////////////////////////////////////\n*/\n\nfunction buildLatest(stream) {\n  var latestTemplate = Handlebars.compile($('#hc-latest').html());\n\n  Handlebars.registerHelper('splitName', function (passedString) {\n    var firstLast = passedString.split(' ');\n    var last = firstLast[1];\n    last = last.toLowerCase();\n    return new Handlebars.SafeString(last);\n  });\n\n  Handlebars.registerHelper('ifAll', function (a, b, opts) {\n    if (a !== b) {\n      return opts.fn(this);\n    }\n  });\n\n  if (stream.length !== 0) {\n    $('.latest__placeholder').remove();\n  }\n\n  $.each(stream, function (k, v) {\n    var latest = latestTemplate(v);\n    $('#latest').append(latest);\n  });\n}\n\n/*\n////////////////////////////////////////////////////////////////////////////////\n// FORMATTING THE DATA\n////////////////////////////////////////////////////////////////////////////////\n*/\n\nfunction formatStream(data) {\n  console.log(data);\n  // the individual we're looking for links for\n  var PERSON = $('.ch__side-block h4').text();\n  var stream = data;\n\n  // iterate through the data, creating an array for all the names in the name key\n  // then reassinging the names key in stream to that array\n  $.each(data, function (k, v) {\n    var names = v.names.split(', ');\n    stream[k].names = names;\n  });\n\n  stream = stream.reverse();\n\n  // if we are on the latest updates page, build the stream of updates\n  if ($('#latest').length > 0) {\n    buildLatest(stream);\n  }\n\n  // iterate over stream, and if each object's names array contains the name of the\n  // individual or 'All', and add that link to the person's related stories div\n  $.each(stream, function (k, v) {\n    if (_.includes(v.names, PERSON) || _.includes(v.names, 'All')) {\n      $('#related-stream').append('<p><a href=\\'' + v.linkurl + '\\'>' + v.linktext + '</a></p>');\n    }\n  });\n\n  // if there's nothing to add to the related stream, remove the related stream div\n  if ($('#related-stream p').length === 0) {\n    $('#related-stream').remove();\n  }\n}\n\n$.ajax({\n  dataType: 'json',\n  url: 'https://interactives.dallasnews.com/data-store/2017/04-2017-healthcare-crossroads.json',\n  success: formatStream,\n  cache: false\n});"]}