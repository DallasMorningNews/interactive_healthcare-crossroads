{"version":3,"names":[],"mappings":"","sources":["individual.js"],"sourcesContent":["/*\nglobal $:true, window:true, _:true, Handlebars:true\n*/\n\n\n/*\n////////////////////////////////////////////////////////////////////////////////\n// BUILDING THE LATEST PAGE\n////////////////////////////////////////////////////////////////////////////////\n*/\n\nfunction buildLatest(stream) {\n  const latestTemplate = Handlebars.compile($('#hc-latest').html());\n\n  Handlebars.registerHelper('splitName', (passedString) => {\n    const firstLast = passedString.split(' ');\n    let last = firstLast[1];\n    last = last.toLowerCase();\n    return new Handlebars.SafeString(last);\n  });\n\n  Handlebars.registerHelper('ifAll', function (a, b, opts) {\n    if (a !== b) {\n      return opts.fn(this);\n    }\n  });\n\n  $.each(stream, (k, v) => {\n    const latest = latestTemplate(v);\n    $('#latest').append(latest);\n  });\n}\n\n\n/*\n////////////////////////////////////////////////////////////////////////////////\n// FORMATTING THE DATA\n////////////////////////////////////////////////////////////////////////////////\n*/\n\nfunction formatStream(data) {\n  // the individual we're looking for links for\n  const PERSON = $('.ch__side-block h4').text();\n  let stream = data;\n\n  // iterate through the data, creating an array for all the names in the name key\n  // then reassinging the names key in stream to that array\n  $.each(data, (k, v) => {\n    const names = v.names.split(', ');\n    stream[k].names = names;\n  });\n\n  stream = stream.reverse();\n\n  // if we are on the latest updates page, build the stream of updates\n  if ($('#latest').length > 0) {\n    buildLatest(stream);\n  }\n\n  // iterate over stream, and if each object's names array contains the name of the\n  // individual or 'All', and add that link to the person's related stories div\n  $.each(stream, (k, v) => {\n    if (_.includes(v.names, PERSON) || _.includes(v.names, 'All')) {\n      $('#related-stream').append(`<p><a href='${v.linkurl}'>${v.linktext}</a></p>`);\n    }\n  });\n}\n\n$.ajax({\n  dataType: 'json',\n  url: 'https://interactives.dallasnews.com/data-store/2017/04-2017-healthcare-crossroads.json',\n  success: formatStream,\n  cache: false,\n});\n"],"file":"individual.js"}